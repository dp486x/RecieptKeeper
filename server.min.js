/*! recieptkeeper 2018-08-20 02:08:20 */

const express=require("express"),app=express(),path=require("path"),chalk=require("chalk"),morgan=require("morgan"),route=express.Router(),mongoose=require("mongoose");mongoose.Promise=require("bluebird");const bodyParser=require("body-parser"),port=3333;var fs=require("fs"),moment=require("moment"),util=require("util");const host="",storeFilesAtRoot="./Reciepts/";app.use(express.static(__dirname+"/")),app.use(bodyParser.urlencoded({extended:!1})),app.use(bodyParser.json()),app.use(morgan("dev",{skip:function(e,r){return r.statusCode<400},stream:process.stderr})),app.use(morgan("dev",{skip:(e,r)=>r.statusCode>=400,stream:process.stdout}));var requestTime=function(e,r,s){e.requestTime=moment().format(),console.log(util.inspect("got request")),s()};app.use(requestTime),app.use("/user",require("./app/controllers/user_controller")),app.use("/notify",require("./app/controllers/notifications_controller")),app.use("/reciept",require("./app/controllers/reciept_controller")),app.get("/",(e,r)=>{r.send("Welcome to the Reciept Keeper.")}),app.listen(3333,()=>{console.log("Server started  at : "+chalk.blue(3333))});